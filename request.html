<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="nav.css">
	<link rel="stylesheet" type="text/css" href="profile.css">
</head>
<style>
	.submitbtn{
	  background-color: #f44336;
	  color: white;
	  padding: 14px 20px;
	  margin: 8px 0;
	  border: none;
	  cursor: pointer;
	  width: 120px;
	}
	#prog{
		-webkit-appearance: none;
		appearance: none;
	}
</style>
<body>
	<ul class="nav">
		<li class="logo"><a href="index.html">MANGOSUB</a></li>
		<li><a class="placeholder"></a></li>
		<li><a>$420</a></li>
		<li><a class="placeholder"></a></li>
		<li><a href="" class="hov" >LOGOUT</a></li>
		<li><a href="profile.html" class="hov">PROFILE</a></li>
		<li><a href="generate_info.html" class="hov">WORK</a></li>
		<li><a href="request.html" class="hov active">REQUEST</a></li>
		<li><a href="index.html" class="hov">ABOUT</a></li>
	</ul>
	<div style = "position: fixed; top: 50%; left: 40%; margin-top: -100px; margin-left: -200px;">
		<p style = "height: 70px; width: 600px"><font size = "6">To request subtitles for a video press Browse, select the file and Submit</font></p>
		<p style = "height: 50px;"><font size = "5">P.S. File size must not exceed 300MB</font></p>
		<label>
			<progress value="0" max="100" id = "prog">0%</progress>
			<input type="file" class = "fileupload" id="fileupload"> 
		</label> 
		<button type = "button" class = "submitbtn" id = "submitBtn" onclick="uploadFile()">SUBMIT</button>
    </div>


	<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyDeunaXdZRX8Kc960GDhzik2bpNKwN2lDY",
	    authDomain: "mangosub-kaist.firebaseapp.com",
	    databaseURL: "https://mangosub-kaist.firebaseio.com",
	    projectId: "mangosub-kaist",
	    storageBucket: "mangosub-kaist.appspot.com",
	    messagingSenderId: "753510490577"
	  };
	  firebase.initializeApp(config);


	  function uploadFile(){
	  	// get elements
		  var prog = document.getElementById('prog');
		  var fileupload = document.getElementById('fileupload');

		  //listen for file selection
		  fileupload.addEventListener('change', function(e){
		  	// get the file
		  	var file = e.target.files[0];

		  	// create a storage ref
		  	var storageRef = firebase.storage().ref('/videos/' + file.name);

		  	//upload that file
		  	var task = storageRef.put(file);

		  	//Update progress bar
		  	task.on('state_changed',
		  		function prog(snapshot){
		  			var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
		  			prog.value = percentage;
		  		}
		  	);
		  });
	  }
	</script>
</body>
</html>
