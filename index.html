<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="nav.css">
		<style>
		input[type=text], [type=email], input[type=password] {
			width: 100%;
			padding: 12px 20px;
			margin: 8px 0;
			display: inline-block;
			border: 1px solid #ccc;
			box-sizing: border-box;
			font-size: 16px;
			font-family: Lato;
		}
		.submitbtn{
			background-color: #990000;
			color: white;
			padding: 14px 20px;
			margin: 8px 0;
			border: none;
			cursor: pointer;
			width: 100%;
			font-size: 16px;
			font-family: Lato;
		}
		button:hover {
			opacity: 0.8;
		}
		.container {
			padding: 16px;
		}
		.modal {
			display: none;
			position: fixed;
			z-index: 1;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgb(0,0,0);
			background-color: rgba(0,0,0,0.4);
			overflow: hidden;
		}
		.modal-content {
			background-color: #fefefe;
			margin: 5% auto auto auto;
			border: 1px solid #888;
			width: 360px;
		}
		.modal-tab {
			display: inline-block;
			list-style: none;
			text-align: center;
			margin: 0px;
			padding: 0px;
			font-size: 18px;
		}
		.modal-tab li {
			cursor: pointer;
			display: inline-block;
			float: left;
			width: 120px;
			background-color: #333;
			color: white;
		}
		.modal-tab li.active {
			cursor: default;
			background-color: white;
			color: #990000;
		}
		.modal-tab li:hover:not(.active) {
			background-color: #111;
		}
		</style>
		<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
		<script>
			// Initialize Firebase
			var config = {
				apiKey: "AIzaSyDeunaXdZRX8Kc960GDhzik2bpNKwN2lDY",
				authDomain: "mangosub-kaist.firebaseapp.com",
				databaseURL: "https://mangosub-kaist.firebaseio.com",
				projectId: "mangosub-kaist",
				storageBucket: "mangosub-kaist.appspot.com",
				messagingSenderId: "753510490577"
			};
			firebase.initializeApp(config);
		</script>
	</head>

	<body>
		<ul class="nav">
			<li class="logo"><a href="index.html">MANGOSUB</a></li>
			<li><a style="display: block; width: 77px;" id="bcredits"></a></li>
			<li><a class="hov" onclick="firebase.auth().signOut();" style="cursor: pointer; display: block;" id="blogout">LOGOUT</a></li>
			<li><a class="hov" onclick="document.getElementById('id01').style.display='block';" style="cursor: pointer; display: none;" id="blogin">LOGIN</a></li>
			<li><a href="profile.html" class="hov" id="bprofile">PROFILE</a></li>
			<li><a href="generate_info.html" class="hov" id="bwork">WORK</a></li>
			<li><a href="request.html" class="hov" id="brequest">REQUEST</a></li>
			<li><a href="index.html" class="hov active">ABOUT</a></li>
		</ul>
		<script>
			firebase.auth().onAuthStateChanged(function(user) {
				if (user) {
					// User is signed in.
					var displayName = user.displayName;
					var email = user.email;
					var uid = user.uid;
					
					document.getElementById("blogin").style.display = "none";
					document.getElementById("blogout").style.display = "block";
					document.getElementById("bcredits").style.display = "block";
					document.getElementById("brequest").href = "request.html";
					document.getElementById("brequest").onclick = null;
					document.getElementById("bwork").href = "generate_info.html";
					document.getElementById("bwork").onclick = null;
					document.getElementById("bprofile").href = "profile.html";
					document.getElementById("bprofile").onclick = null;

					var db = firebase.database().ref().child("users").child(uid);

					db.child("credits").once("value").then(function(snapshot) {
						var credits_val = snapshot.val();
						document.getElementById("bcredits").innerHTML = "â‚¡ " + String(credits_val);
					});
				} else {
					// User is signed out.
					document.getElementById("blogin").style.display = "block";
					document.getElementById("blogout").style.display = "none";
					document.getElementById("bcredits").style.display = "none";
					document.getElementById("brequest").href = "#";
					document.getElementById("brequest").onclick = function() {document.getElementById('id01').style.display='block'};
					document.getElementById("bwork").href = "#";
					document.getElementById("bwork").onclick = function() {document.getElementById('id01').style.display='block'};
					document.getElementById("bprofile").href = "#";
					document.getElementById("bprofile").onclick = function() {document.getElementById('id01').style.display='block'};
				}
			});
		</script>
		<div style="margin-top: 70px; overflow: auto; height: calc(100vh - 70px);">
			<div style="margin-left: 100px;">
				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>

				<p style = "height: 50px; width: 80%; text-align: left; font-size: 200%;"> MANGOSUB</p>

				<p style = "height: 150px; width: 80%; text-align: left; font-size: 200%;">is a platform on which you can have fun while you learn English. After spending some time on this platform watching videos, you will have improved your English listening without you even knowing you learned</p>

				<p style = "height: 70px; width: 90%; text-align: right; font-size: 200%;">You can come here to subtitle videos yourself to improve your English listening skills. Also, you can upload your own video for others to subtitle and you get subtitles for the videos you want to watch!</p>
			</div>
		</div>
		<div id="id01" class="modal">
			
			<div class="modal-content">
				<ul class="modal-tab">
					<li class="active" onclick="changeTab(this, 0);" id="tlogin"><p>Login</p></li>
					<li onclick="changeTab(this, 1);" id="tregister"><p>Register</p></li>
					<li onclick="changeTab(this, 2);" id="treset"><p>Reset</p></li>
				</ul>
				<div class="container" id="clogin" style="display: block;">
					<form action="javascript:login();">
						<input type="email" placeholder="Email" name="email" required>
						<input type="password" placeholder="Password" name="psw" required>
						<div style="font-size: 16px; margin: 8px 0;"><label><input type="checkbox" style=""> Remember me</label></div>
						<button type="submit" class="submitbtn">LOGIN</button>
						<div style="font-size: 16px; margin: 8px 0; color: red;" id="elogin"></div>
					</form>
				</div>
				<div class="container" id="cregister" style="display: none;">
					<form action="javascript:register();">
						<input type="text" placeholder="Username" name="uname" required>
						<input type="email" placeholder="Email" name="email" required>
						<input type="password" placeholder="Password" name="psw" required>
						<input type="password" placeholder="Confirm Password" name="cpsw" required>
						<button type="submit" class="submitbtn">REGISTER</button>
						<div style="font-size: 16px; margin: 8px 0; color: red;" id="eregister"></div>
					</form>
				</div>
				<div class="container" id="creset" style="display: none;">
					<form action="javascript:reset();">
						<input type="email" placeholder="Email" name="email" required>
						<button type="submit" class="submitbtn">RESET</button>
						<div style="font-size: 16px; margin: 8px 0; color: red;" id="ereset"></div>
					</form>
				</div>
			</div>
		</div>
		
		<script>
			var modal = document.getElementById('id01');
			window.onclick = function(event) {
				if (event.target == modal) {
					modal.style.display = "none";
				}
			}
			function changeTab(self, index) {
				if(!self.classList.contains("active")) {
					self.classList.add("active");
					if(index == 0) {
						document.getElementById("tregister").classList.remove("active");
						document.getElementById("treset").classList.remove("active");
						document.getElementById("clogin").style.display = "block";
						document.getElementById("cregister").style.display = "none";
						document.getElementById("creset").style.display = "none";
					} else if(index == 1) {
						document.getElementById("tlogin").classList.remove("active");
						document.getElementById("treset").classList.remove("active");
						document.getElementById("clogin").style.display = "none";
						document.getElementById("cregister").style.display = "block";
						document.getElementById("creset").style.display = "none";
					} else {
						document.getElementById("tlogin").classList.remove("active");
						document.getElementById("tregister").classList.remove("active");
						document.getElementById("clogin").style.display = "none";
						document.getElementById("cregister").style.display = "none";
						document.getElementById("creset").style.display = "block";
					}
				}
			}
			function login() {
				var form = document.forms[0];
				var email = form.elements["email"].value;
				var password = form.elements["psw"].value;
				firebase.auth().signInWithEmailAndPassword(email, password).then(function(user) {
					modal.style.display = "none";
				}).catch(function(error) {
					var errorCode = error.code;
					var errorMessage = error.message;
					document.getElementById("elogin").innerHTML = errorMessage;
				});
			}
			function register() {
				var form = document.forms[1];
				var username = form.elements["uname"].value;
				var email = form.elements["email"].value;
				var password = form.elements["psw"].value;
				var password2 = form.elements["cpsw"].value;
				if(password != password2) {
					document.getElementById("eregister").innerHTML = "The passwords do not match.";
				} else {
					firebase.auth().createUserWithEmailAndPassword(email, password).then(function(user) {
						user.updateProfile({displayName: username});

						var db = firebase.database().ref().child("users").child(user.uid);
						db.set({
							username: username,
							credits: 0,
							score: 0,
							generate: 0,
							fix: 0,
							verify: 0,
						});

						modal.style.display = "none";
					}).catch(function(error) {
						var errorCode = error.code;
						var errorMessage = error.message;
						document.getElementById("eregister").innerHTML = errorMessage;
					});
				}
			}
			function reset() {

			}
		</script>
	</body>
</html>
